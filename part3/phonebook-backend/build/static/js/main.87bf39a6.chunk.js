(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(16),r=n.n(c),a=n(6),o=n(3),u=n(1),i=n(0),s=function(e){var t=e.handleFilterInput,n=e.handleFilterInputChange;return Object(i.jsxs)("div",{children:[" filter shown with ",Object(i.jsx)("input",{value:t,onChange:n})]})},l=function(e){var t=e.text,n=e.value,c=e.onChange;return Object(i.jsx)("div",{children:Object(i.jsxs)("div",{children:[t,": ",Object(i.jsx)("input",{value:n,onChange:c})]})})},d=function(e){var t=e.person,n=e.onClick;return Object(i.jsxs)("li",{children:[t.name," - ",t.number," ",Object(i.jsx)("button",{onClick:n,children:"delete"})]})},j=n(4),b=n.n(j),f="/api/persons",h=function(e){return b.a.post(f,e).then((function(e){return e.data}))},m=function(e,t){return b.a.put("".concat(f,"/").concat(e),t).then((function(e){return e.data}))},O=function(){return b.a.get(f).then((function(e){return e.data}))},v=function(e){return b.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},p=function(e){var t=e.message;return null===t||null===t.type?null:"error"===t.type?Object(i.jsx)("div",{className:"error",children:t.text}):"success"===t.type?Object(i.jsx)("div",{className:"success",children:t.text}):void 0},x=function(){var e=Object(u.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1];Object(u.useEffect)((function(){O().then((function(e){c(e)})).catch((function(e){return console.log(e)}))}),[]);var r=Object(u.useState)(!0),j=Object(o.a)(r,2),b=(j[0],j[1],Object(u.useState)("")),f=Object(o.a)(b,2),x=f[0],g=f[1],w=Object(u.useState)(""),C=Object(o.a)(w,2),y=C[0],k=C[1],S=Object(u.useState)(""),I=Object(o.a)(S,2),N=I[0],F=I[1],L=Object(u.useState)(null),D=Object(o.a)(L,2),T=D[0],E=D[1];console.log(N);var J=n.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())}));return Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"Phonebook"}),Object(i.jsx)(p,{message:T}),Object(i.jsx)(s,{handleFilterInput:N,handleFilterInputChange:function(e){return F(e.target.value)}}),Object(i.jsx)("h2",{children:"add new"}),Object(i.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=n.find((function(e){return t=e.name,n=x,t.toLowerCase()===n.toLowerCase();var t,n}));if(t){if(window.confirm("".concat(x," is already added to phonebook, replace the old number with a new one?"))){var r=Object(a.a)(Object(a.a)({},t),{},{number:y,name:x});m(t.id,r).then((function(e){c(n.filter((function(e){return e.name!==r.name})).concat(e)),E({text:"".concat(r.name," number was updated to ").concat(r.number,"!"),type:"success"}),setTimeout((function(){return E(null)}),5e3)})).catch((function(e){c(n.filter((function(e){return e.name!==t.name}))),E({text:"".concat(t.name," has already been removed from the server!"),type:"error"}),setTimeout((function(){E(null)}),5e3)}))}}else{var o={name:x,number:y,date:(new Date).toISOString()};h(o).then((function(e){c(n.concat(e)),g(""),k(""),E({text:"Added ".concat(o.name),type:"success"}),setTimeout((function(){E(null)}),5e3)})).catch((function(e){E({text:e.response.data.error,type:"error"})}))}},children:[Object(i.jsx)(l,{text:"Name",value:x,onChange:function(e){g(e.target.value)}}),Object(i.jsx)(l,{text:"Number",value:y,onChange:function(e){k(e.target.value)}}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)("div",{children:Object(i.jsx)("ul",{children:J.map((function(e){return Object(i.jsx)(d,{person:e,onClick:function(){return function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Delete ".concat(t.name,"?"))&&v(e).then((function(){var r=n.filter((function(t){return t.id!==e}));c(r),E({text:"".concat(t.name," has been removed from the server!"),type:"success"})}))}(e.id)}},e.id)}))})})]})};n(39),n(11);r.a.render(Object(i.jsx)(x,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.87bf39a6.chunk.js.map